{"ast":null,"code":"import _regeneratorRuntime from\"/home/eddie/Code/guided-capstone-project/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/eddie/Code/guided-capstone-project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/eddie/Code/guided-capstone-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import IceAndFireApi from\"../../services/IceAndFireApi\";import{useParams,Link}from\"react-router-dom\";import{Container,Card,Spinner}from\"react-bootstrap\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Character=function Character(){var _useParams=useParams(),characterId=_useParams.characterId;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),character=_useState2[0],setCharacter=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),allegiances=_useState4[0],setAllegiances=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];useEffect(function(){var fetchCharacter=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;console.log(\"Fetching character with ID:\",characterId);_context.next=4;return IceAndFireApi.getCharacterById(characterId);case 4:response=_context.sent;console.log(\"Character response:\",response);setCharacter(response);_context.next=9;return fetchAllegiances(response.allegiances);case 9:_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.error(\"Error fetching character:\",_context.t0);setError(\"Error fetching character. Please try again later.\");case 15:case\"end\":return _context.stop();}},_callee,null,[[0,11]]);}));return function fetchCharacter(){return _ref.apply(this,arguments);};}();var fetchAllegiances=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(allegianceUrls){var allegiancePromises,allegianceNames;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:allegiancePromises=allegianceUrls.map(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(url){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return IceAndFireApi.getAllegianceByUrl(url);case 3:response=_context2.sent;return _context2.abrupt(\"return\",response.name||\"Unknown Allegiance\");case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);return _context2.abrupt(\"return\",\"Unknown Allegiance\");case 10:case\"end\":return _context2.stop();}},_callee2,null,[[0,7]]);}));return function(_x2){return _ref3.apply(this,arguments);};}());_context3.next=3;return Promise.all(allegiancePromises);case 3:allegianceNames=_context3.sent;setAllegiances(allegianceNames);case 5:case\"end\":return _context3.stop();}},_callee3);}));return function fetchAllegiances(_x){return _ref2.apply(this,arguments);};}();console.log(\"Effect - characterId:\",characterId);fetchCharacter();},[characterId]);console.log(\"Render - character:\",character);console.log(\"Render - allegiances:\",allegiances);if(!character){return/*#__PURE__*/_jsx(Spinner,{color:\"light\"});}return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mt-5 mb-4\",children:\"Character Information\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:error}),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:character.name||(character.aliases.length>0?character.aliases[0]:\"Unnamed\")}),/*#__PURE__*/_jsxs(Card.Text,{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Culture: \",character.culture||\"Unknown\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Gender: \",character.gender===\"Male\"?\"♂️\":character.gender===\"Female\"?\"♀️\":\"Unknown\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Born: \",character.born||\"Unknown\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Died: \",character.died||\"Unknown\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Titles: \",character.titles.join(\", \")||\"No Titles\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Aliases: \",character.aliases.join(\", \")||\"No Aliases\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Father: \",character.father||\"Unknown\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Mother: \",character.mother||\"Unknown\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Spouse:\",\" \",character.spouse?/*#__PURE__*/_jsx(Link,{to:\"/character/\".concat(character.spouse.split(\"/\").pop()),children:character.spouse.split(\"/\").pop()}):\"Unknown\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Allegiances:\",\" \",allegiances.length>0?allegiances.map(function(allegiance,index){return/*#__PURE__*/_jsx(Link,{to:\"/house/\".concat(character.allegiances[index].split(\"/\").pop()),className:\"mr-2\",children:allegiance},index);}):\"Unknown\"]})]})]})})]});};export default Character;","map":{"version":3,"names":["React","useState","useEffect","IceAndFireApi","useParams","Link","Container","Card","Spinner","jsx","_jsx","jsxs","_jsxs","Character","_useParams","characterId","_useState","_useState2","_slicedToArray","character","setCharacter","_useState3","_useState4","allegiances","setAllegiances","_useState5","_useState6","error","setError","fetchCharacter","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","console","log","getCharacterById","sent","fetchAllegiances","t0","stop","apply","arguments","_ref2","_callee3","allegianceUrls","allegiancePromises","allegianceNames","_callee3$","_context3","map","_ref3","_callee2","url","_callee2$","_context2","getAllegianceByUrl","abrupt","name","_x2","Promise","all","_x","color","children","className","Body","Title","aliases","length","Text","culture","gender","born","died","titles","join","father","mother","spouse","to","concat","split","pop","allegiance","index"],"sources":["/home/eddie/Code/guided-capstone-project/src/pages/Character/Character.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport IceAndFireApi from \"../../services/IceAndFireApi\";\nimport { useParams, Link } from \"react-router-dom\";\nimport { Container, Card, Spinner } from \"react-bootstrap\";\n\nconst Character = () => {\n    const { characterId } = useParams();\n    const [character, setCharacter] = useState(null);\n    const [allegiances, setAllegiances] = useState([]);\n    const [error, setError] = useState(null);\n\n    useEffect(() => {\n        const fetchCharacter = async () => {\n            try {\n                console.log(\"Fetching character with ID:\", characterId);\n                const response = await IceAndFireApi.getCharacterById(characterId);\n                console.log(\"Character response:\", response);\n                setCharacter(response);\n                await fetchAllegiances(response.allegiances);\n            } catch (error) {\n                console.error(\"Error fetching character:\", error);\n                setError(\"Error fetching character. Please try again later.\");\n            }\n        };\n\n        const fetchAllegiances = async (allegianceUrls) => {\n            const allegiancePromises = allegianceUrls.map(async (url) => {\n                try {\n                    const response = await IceAndFireApi.getAllegianceByUrl(url);\n                    return response.name || \"Unknown Allegiance\";\n                } catch (error) {\n                    return \"Unknown Allegiance\";\n                }\n            });\n\n            const allegianceNames = await Promise.all(allegiancePromises);\n            setAllegiances(allegianceNames);\n        };\n\n        console.log(\"Effect - characterId:\", characterId);\n        fetchCharacter();\n    }, [characterId]);\n\n    console.log(\"Render - character:\", character);\n    console.log(\"Render - allegiances:\", allegiances);\n\n    if (!character) {\n        return <Spinner color=\"light\"></Spinner>;\n    }\n\n    return (\n        <Container>\n            <h1 className=\"mt-5 mb-4\">Character Information</h1>\n            { error && <p className=\"text-danger\">{ error }</p> }\n            <Card>\n                <Card.Body>\n                    <Card.Title>\n                        { character.name || (character.aliases.length > 0 ? character.aliases[0] : \"Unnamed\") }\n                    </Card.Title>\n                    <Card.Text>\n                        <p>Culture: { character.culture || \"Unknown\" }</p>\n                        <p>Gender: { character.gender === \"Male\" ? \"♂️\" : character.gender === \"Female\" ? \"♀️\" : \"Unknown\" }</p>\n                        <p>Born: { character.born || \"Unknown\" }</p>\n                        <p>Died: { character.died || \"Unknown\" }</p>\n                        <p>Titles: { character.titles.join(\", \") || \"No Titles\" }</p>\n                        <p>Aliases: { character.aliases.join(\", \") || \"No Aliases\" }</p>\n                        <p>Father: { character.father || \"Unknown\" }</p>\n                        <p>Mother: { character.mother || \"Unknown\" }</p>\n                        <p>\n                            Spouse:{ \" \" }\n                            { character.spouse ? (\n                                <Link to={ `/character/${character.spouse.split(\"/\").pop()}` }>{ character.spouse.split(\"/\").pop() }</Link>\n                            ) : (\n                                \"Unknown\"\n                            ) }\n                        </p>\n                        <p>\n                            Allegiances:{ \" \" }\n                            { allegiances.length > 0 ? (\n                                allegiances.map((allegiance, index) => (\n                                    <Link\n                                        key={ index }\n                                        to={ `/house/${character.allegiances[index].split(\"/\").pop()}` }\n                                        className=\"mr-2\"\n                                    >\n                                        { allegiance }\n                                    </Link>\n                                ))\n                            ) : (\n                                \"Unknown\"\n                            ) }\n                        </p>\n                    </Card.Text>\n                </Card.Body>\n            </Card>\n        </Container>\n    );\n};\n\nexport default Character;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}