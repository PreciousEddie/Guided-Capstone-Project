{"ast":null,"code":"import _regeneratorRuntime from\"/home/eddie/Code/guided-capstone-project/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/eddie/Code/guided-capstone-project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/eddie/Code/guided-capstone-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import IceAndFireApi from\"../../services/IceAndFireApi\";import{Link}from\"react-router-dom\";import Pagination from\"../../components/Pagination/Pagination\";import{Container,Row,Col,Card,Button}from\"react-bootstrap\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Houses=function Houses(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),houses=_useState2[0],setHouses=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),currentPage=_useState4[0],setCurrentPage=_useState4[1];var _useState5=useState(10),_useState6=_slicedToArray(_useState5,2),pageSize=_useState6[0],setPageSize=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),totalHouses=_useState8[0],setTotalHouses=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),error=_useState10[0],setError=_useState10[1];var totalPages=Math.ceil(totalHouses/pageSize);useEffect(function(){var fetchHouses=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return IceAndFireApi.getHousesWithPagination(currentPage,pageSize);case 3:response=_context.sent;console.log(\"API Response:\",response);if(response.data.length===0){console.log(\"No more houses to list.\");}else{setHouses(response.data);setTotalHouses(response.total);}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);setError(\"Error fetching houses. Please try again later.\");case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function fetchHouses(){return _ref.apply(this,arguments);};}();fetchHouses();console.log(\"currentPage:\",currentPage);console.log(\"totalPages:\",totalPages);},[currentPage,pageSize,setTotalHouses]);var handlePageChange=function handlePageChange(newPage){setCurrentPage(newPage);};var handlePageSizeChange=function handlePageSizeChange(newSize){setPageSize(newSize);setCurrentPage(1);};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mt-5 mb-4\",children:\"Houses of Westeros and Beyond\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:error}),/*#__PURE__*/_jsx(Row,{children:houses.map(function(house){return/*#__PURE__*/_jsx(Col,{md:6,lg:4,className:\"mb-4\",children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:/*#__PURE__*/_jsx(Link,{to:\"/houses/\".concat(house.url.split(\"/\").pop()),children:/*#__PURE__*/_jsx(\"strong\",{children:house.name})})}),/*#__PURE__*/_jsx(Card.Text,{children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Titles: \",house.titles.join(\", \")||\"No Titles\",/*#__PURE__*/_jsx(\"br\",{}),\"Words: \",house.words||\"No Words\",/*#__PURE__*/_jsx(\"br\",{}),\"Current Lord:\",\" \",house.currentLord?/*#__PURE__*/_jsx(Link,{to:\"/character/\".concat(house.currentLord.split(\"/\").pop()),children:house.currentLord.split(\"/\").pop()}):\"N/A\",/*#__PURE__*/_jsx(\"br\",{}),\"Sworn Members:\",\" \",house.swornMembers&&house.swornMembers.map(function(member,index){return/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/character/\".concat(member.split(\"/\").pop()),children:member.split(\"/\").pop()}),index<house.swornMembers.length-1&&\", \"]},index);})]})})]})})},house.url);})}),/*#__PURE__*/_jsx(Pagination,{currentPage:currentPage,totalPages:totalPages,onPageChange:handlePageChange}),/*#__PURE__*/_jsxs(\"select\",{value:pageSize,onChange:function onChange(e){return handlePageSizeChange(parseInt(e.target.value,10));},children:[/*#__PURE__*/_jsx(\"option\",{value:10,children:\"10 per page\"}),/*#__PURE__*/_jsx(\"option\",{value:20,children:\"20 per page\"}),/*#__PURE__*/_jsx(\"option\",{value:50,children:\"50 per page\"})]})]});};export default Houses;","map":{"version":3,"names":["React","useState","useEffect","IceAndFireApi","Link","Pagination","Container","Row","Col","Card","Button","jsx","_jsx","jsxs","_jsxs","Houses","_useState","_useState2","_slicedToArray","houses","setHouses","_useState3","_useState4","currentPage","setCurrentPage","_useState5","_useState6","pageSize","setPageSize","_useState7","_useState8","totalHouses","setTotalHouses","_useState9","_useState10","error","setError","totalPages","Math","ceil","fetchHouses","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","getHousesWithPagination","sent","console","log","data","length","total","t0","stop","apply","arguments","handlePageChange","newPage","handlePageSizeChange","newSize","children","className","map","house","md","lg","Body","Title","to","concat","url","split","pop","name","Text","titles","join","words","currentLord","swornMembers","member","index","onPageChange","value","onChange","e","parseInt","target"],"sources":["/home/eddie/Code/guided-capstone-project/src/pages/Houses/Houses.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport IceAndFireApi from \"../../services/IceAndFireApi\";\nimport { Link } from \"react-router-dom\";\nimport Pagination from \"../../components/Pagination/Pagination\";\nimport { Container, Row, Col, Card, Button } from \"react-bootstrap\";\n\nconst Houses = () => {\n    const [houses, setHouses] = useState([]);\n    const [currentPage, setCurrentPage] = useState(1);\n    const [pageSize, setPageSize] = useState(10);\n    const [totalHouses, setTotalHouses] = useState(0);\n    const [error, setError] = useState(null);\n\n    const totalPages = Math.ceil(totalHouses / pageSize);\n\n    useEffect(() => {\n        const fetchHouses = async () => {\n            try {\n                const response = await IceAndFireApi.getHousesWithPagination(currentPage, pageSize);\n                console.log(\"API Response:\", response);\n\n                if (response.data.length === 0) {\n                    console.log(\"No more houses to list.\");\n                } else {\n                    setHouses(response.data);\n                    setTotalHouses(response.total);\n                }\n            } catch (err) {\n                setError(\"Error fetching houses. Please try again later.\");\n            }\n        };\n\n        fetchHouses();\n        console.log(\"currentPage:\", currentPage);\n        console.log(\"totalPages:\", totalPages);\n    }, [currentPage, pageSize, setTotalHouses]);\n\n    const handlePageChange = (newPage) => {\n        setCurrentPage(newPage);\n    };\n\n    const handlePageSizeChange = (newSize) => {\n        setPageSize(newSize);\n        setCurrentPage(1);\n    };\n\n    return (\n        <Container>\n            <h1 className=\"mt-5 mb-4\">Houses of Westeros and Beyond</h1>\n            { error && <p className=\"text-danger\">{ error }</p> }\n            <Row>\n                { houses.map((house) => (\n                    <Col key={ house.url } md={ 6 } lg={ 4 } className=\"mb-4\">\n                        <Card>\n                            <Card.Body>\n                                <Card.Title>\n                                    <Link to={ `/houses/${house.url.split(\"/\").pop()}` }>\n                                        <strong>{ house.name }</strong>\n                                    </Link>\n                                </Card.Title>\n                                <Card.Text>\n                                    <p>\n                                        Titles: { house.titles.join(\", \") || \"No Titles\" }\n                                        <br />\n                                        Words: { house.words || \"No Words\" }\n                                        <br />\n                                        Current Lord:{ \" \" }\n                                        { house.currentLord ? (\n                                            <Link to={ `/character/${house.currentLord.split(\"/\").pop()}` }>{ house.currentLord.split(\"/\").pop() }</Link>\n                                        ) : (\n                                            \"N/A\"\n                                        ) }\n                                        <br />\n                                        Sworn Members:{ \" \" }\n                                        { house.swornMembers &&\n                                            house.swornMembers.map((member, index) => (\n                                                <span key={ index }>\n                                                    <Link to={ `/character/${member.split(\"/\").pop()}` }>{ member.split(\"/\").pop() }</Link>\n                                                    { index < house.swornMembers.length - 1 && \", \" }\n                                                </span>\n                                            )) }\n                                    </p>\n                                </Card.Text>\n                            </Card.Body>\n                        </Card>\n                    </Col>\n                )) }\n            </Row>\n            <Pagination currentPage={ currentPage } totalPages={ totalPages } onPageChange={ handlePageChange } />\n            <select value={ pageSize } onChange={ (e) => handlePageSizeChange(parseInt(e.target.value, 10)) }>\n                <option value={ 10 }>10 per page</option>\n                <option value={ 20 }>20 per page</option>\n                <option value={ 50 }>50 per page</option>\n            </select>\n        </Container>\n    );\n};\n\nexport default Houses;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}